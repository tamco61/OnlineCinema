# ========================================
# ETL Service Configuration
# ========================================

# DAG Settings
FETCH_EXTERNAL_METADATA_SCHEDULE_CRON="*/3 * * * *"
FETCH_EXTERNAL_METADATA_IS_INIT_PAUSED=False
FETCH_EXTERNAL_METADATA_FOR_UPDATE_INTERVAL="1 minute"
VIDEO_TRANSCODING_SCHEDULE_CRON="*/1 * * * *"
VIDEO_TRANSCODING_IS_INIT_PAUSED=False

# Airflow Configuration
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__LOAD_EXAMPLES=False
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=False
AIRFLOW__CORE__DEFAULT_TIMEZONE=Europe/Moscow
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=False
AIRFLOW__WEBSERVER__SECRET_KEY=your-secret-key-here-change-in-production

# Airflow Database (PostgreSQL)
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@etl-airflow-postgres:5432/airflow
AIRFLOW__DATABASE__LOAD_DEFAULT_CONNECTIONS=False

# Airflow Celery (for task distribution)
AIRFLOW__CELERY__BROKER_URL=redis://etl-redis:6379/0
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://airflow:airflow@etl-airflow-postgres:5432/airflow

# Airflow Authentication
AIRFLOW__WEBSERVER__AUTHENTICATE=True
AIRFLOW__AUTH__BACKEND=airflow.api.auth.backend.basic_auth
AIRFLOW_ADMIN_USERNAME=admin
AIRFLOW_ADMIN_PASSWORD=admin
AIRFLOW_ADMIN_EMAIL=admin@cinema.com

# Celery Worker Configuration
CELERY_BROKER_URL=redis://etl-redis:6379/0
CELERY_RESULT_BACKEND=redis://etl-redis:6379/0

# Catalog Database (PostgreSQL)
AIRFLOW_CONN_CATALOG_POSTGRES=postgresql://cinema_user:cinema_password@cinema-postgres:5432/catalog_db

# TMDb API
TMDB_API_KEY=eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkMTZmZWYyMzZhYzk3MWQxODA4NTNmMjU4ZmY2MjdmZCIsIm5iZiI6MTc2NzgyNzYyNy4wNTksInN1YiI6IjY5NWVlOGFiNjZiYjYyZTdlNTg2MzdjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.yv4Qo1rnF-5-NuDxNTF77Nh7Ey2g7sCJEjzads7i0wY
TMDB_BASE_URL=https://api.themoviedb.org/3
TMDB_IMAGE_BASE_URL=https://image.tmdb.org/t/p/w500

# Redis
REDIS_HOST=etl-redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Logging
LOG_LEVEL=INFO
AIRFLOW__LOGGING__LOGGING_LEVEL=INFO

# Transcoding settings
VIDEO_RESOLUTIONS=1080p,720p,480p,360p
VIDEO_OUTPUT_FORMATS=hls,dash
VIDEO_TRANSCODE_PRESET=medium

# Thumbnail settings
THUMBNAIL_TIMESTAMPS=0,300,600,1200,1800
THUMBNAIL_RESOLUTION=1280x720

# s3
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin123
AWS_REGION=us-east-1
AWS_S3_BUCKET=cinema-videos
AWS_ENDPOINT_URL=http://minio:9000
AWS_S3_FILE_OVERWRITE=False
AWS_DEFAULT_ACL=None
AWS_QUERYSTRING_AUTH=False